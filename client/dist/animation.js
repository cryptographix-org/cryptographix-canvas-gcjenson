define(["require", "exports"], function (require, exports) {
    var Animation = (function () {
        function Animation() {
        }
        Animation.zoomIn = function (nodeToZoom, nodes, zoomLevel) {
            jsPlumb.setDraggable(nodeToZoom.id, false);
            var nodeElement = document.getElementById(nodeToZoom.id);
            nodeElement.style.width = (parseInt(nodeElement.style.width) * zoomLevel) + "px";
            nodeElement.style.height = (parseInt(nodeElement.style.height) * zoomLevel) + "px";
            nodeElement.style.borderRadius = (20 * zoomLevel) + "px";
            this.setFonts("component-name", zoomLevel);
            var zoomedOldX = parseInt(nodeElement.style.left);
            var zoomedOldY = parseInt(nodeElement.style.top);
            var zoomedNewX = (screen.width / 2) - ((zoomLevel * 100) / 2);
            var zoomedNewY = (screen.height / 2) - ((zoomLevel * 100) / 1.5);
            var deltaX = zoomedNewX - zoomedOldX;
            var deltaY = zoomedNewY - zoomedOldY;
            jsPlumb.animate(nodeToZoom.id, {
                "left": zoomedNewX,
                "top": zoomedNewY,
                "height": nodeElement.style.height,
                "width": nodeElement.style.width
            }, {
                duration: "400"
            }, {
                step: function () {
                    jsPlumb.repaintEverything();
                }
            });
            var otherNodes = nodes.filter(function (node) {
                return node.id !== nodeToZoom.id;
            });
            for (var _i = 0; _i < otherNodes.length; _i++) {
                var node = otherNodes[_i];
                jsPlumb.setDraggable(node.id, false);
                nodeElement = document.getElementById(node.id);
                nodeElement.style.width = (parseInt(nodeElement.style.width) * zoomLevel) + "px";
                nodeElement.style.height = (parseInt(nodeElement.style.height) * zoomLevel) + "px";
                nodeElement.style.borderRadius = (parseInt(nodeElement.style.borderRadius) * zoomLevel) + "px";
                var oldX = parseInt(nodeElement.style.left);
                var oldY = parseInt(nodeElement.style.top);
                var newX = oldX + deltaX + ((zoomLevel - 1) * (oldX - zoomedOldX));
                var newY = oldY + deltaY + ((zoomLevel - 1) * (oldY - zoomedOldY));
                jsPlumb.animate(node.id, {
                    "left": newX,
                    "top": newY,
                    "height": nodeElement.style.height,
                    "width": nodeElement.style.width
                }, { duration: "400" }, {
                    step: function () {
                        jsPlumb.repaintEverything();
                    }
                });
            }
        };
        Animation.zoomOut = function (nodes) {
            for (var _i = 0; _i < nodes.length; _i++) {
                var node = nodes[_i];
                jsPlumb.setDraggable(node.id, true);
                var nodeElement = document.getElementById(node.id);
                nodeElement.style.width = "100px";
                nodeElement.style.height = "100px";
                nodeElement.style.borderRadius = "20px";
                this.setFonts("component-name", 1);
                jsPlumb.animate(node.id, {
                    "left": parseInt(node.metadata.view.x),
                    "top": parseInt(node.metadata.view.y),
                    "height": "100px",
                    "width": "400px"
                }, { duration: "400" }, {
                    step: function () {
                        jsPlumb.repaintEverything();
                    }
                });
            }
        };
        Animation.setFonts = function (className, zoomFactor) {
            var componentLabels = document.getElementsByClassName(className);
            for (var _i = 0; _i < componentLabels.length; _i++) {
                var label = componentLabels[_i];
                label.style.fontSize = (40 * zoomFactor) + "px";
                label.style.marginTop = (17 * zoomFactor) + "px";
            }
        };
        return Animation;
    })();
    exports.Animation = Animation;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi50cyJdLCJuYW1lcyI6WyJBbmltYXRpb24iLCJBbmltYXRpb24uY29uc3RydWN0b3IiLCJBbmltYXRpb24uem9vbUluIiwiQW5pbWF0aW9uLnpvb21PdXQiLCJBbmltYXRpb24uc2V0Rm9udHMiXSwibWFwcGluZ3MiOiI7SUFFQTtRQUFBQTtRQWtHQUMsQ0FBQ0E7UUFoR1FELGdCQUFNQSxHQUFiQSxVQUFjQSxVQUFnQkEsRUFBRUEsS0FBYUEsRUFBRUEsU0FBaUJBO1lBRTlERSxPQUFPQSxDQUFDQSxZQUFZQSxDQUFDQSxVQUFVQSxDQUFDQSxFQUFFQSxFQUFFQSxLQUFLQSxDQUFDQSxDQUFDQTtZQUMzQ0EsSUFBSUEsV0FBV0EsR0FBR0EsUUFBUUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7WUFDekRBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLFFBQVFBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1lBQ2pGQSxXQUFXQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxRQUFRQSxDQUFDQSxXQUFXQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQTtZQUVuRkEsV0FBV0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsWUFBWUEsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsU0FBU0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0E7WUFDekRBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGdCQUFnQkEsRUFBRUEsU0FBU0EsQ0FBQ0EsQ0FBQ0E7WUFHM0NBLElBQUlBLFVBQVVBLEdBQUdBLFFBQVFBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ2xEQSxJQUFJQSxVQUFVQSxHQUFHQSxRQUFRQSxDQUFDQSxXQUFXQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUVqREEsSUFBSUEsVUFBVUEsR0FBR0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsU0FBU0EsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDOURBLElBQUlBLFVBQVVBLEdBQUdBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLFNBQVNBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO1lBQ2pFQSxJQUFJQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxVQUFVQSxDQUFDQTtZQUNyQ0EsSUFBSUEsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsVUFBVUEsQ0FBQ0E7WUFHckNBLE9BQU9BLENBQUNBLE9BQU9BLENBQUNBLFVBQVVBLENBQUNBLEVBQUVBLEVBQUVBO2dCQUMzQkEsTUFBTUEsRUFBRUEsVUFBVUE7Z0JBQ2xCQSxLQUFLQSxFQUFFQSxVQUFVQTtnQkFDakJBLFFBQVFBLEVBQUVBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BO2dCQUNsQ0EsT0FBT0EsRUFBRUEsV0FBV0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0E7YUFDakNBLEVBQUNBO2dCQUNBQSxRQUFRQSxFQUFFQSxLQUFLQTthQUNoQkEsRUFBQ0E7Z0JBQ0FBLElBQUlBLEVBQUVBO29CQUNKLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2dCQUM5QixDQUFDO2FBQ0pBLENBQUNBLENBQUNBO1lBRUhBLElBQUlBLFVBQVVBLEdBQUdBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLFVBQVNBLElBQUlBO2dCQUN2QyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxVQUFVLENBQUMsRUFBRSxDQUFDO1lBQ3JDLENBQUMsQ0FBQ0EsQ0FBQ0E7WUFFSEEsR0FBR0EsQ0FBQ0EsQ0FBYUEsVUFBVUEsRUFBdEJBLHNCQUFRQSxFQUFSQSxJQUFzQkEsQ0FBQ0E7Z0JBQXZCQSxJQUFJQSxJQUFJQSxHQUFJQSxVQUFVQSxJQUFkQTtnQkFFWEEsT0FBT0EsQ0FBQ0EsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsRUFBRUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3JDQSxXQUFXQSxHQUFHQSxRQUFRQSxDQUFDQSxjQUFjQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtnQkFDL0NBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLFFBQVFBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO2dCQUNqRkEsV0FBV0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0E7Z0JBQ25GQSxXQUFXQSxDQUFDQSxLQUFLQSxDQUFDQSxZQUFZQSxHQUFHQSxDQUFDQSxRQUFRQSxDQUFDQSxXQUFXQSxDQUFDQSxLQUFLQSxDQUFDQSxZQUFZQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQTtnQkFFL0ZBLElBQUlBLElBQUlBLEdBQUdBLFFBQVFBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO2dCQUM1Q0EsSUFBSUEsSUFBSUEsR0FBR0EsUUFBUUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7Z0JBRTNDQSxJQUFJQSxJQUFJQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxDQUFDQSxDQUFDQSxTQUFTQSxHQUFHQSxD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QUNoREEsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsU0FBU0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsVUFBVUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0E7YUFDbERBO1FBQ0hBLENBQUNBO1FBQ0hKLGdCQUFDQTtJQUFEQSxDQWxHQSxBQWtHQ0EsSUFBQTtJQWxHWSxpQkFBUyxZQWtHckIsQ0FBQSIsImZpbGUiOiJhbmltYXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge05vZGV9IGZyb20gJ2NyeXB0b2dyYXBoaXgtc2ltLWNvcmUnO1xuXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uIHtcbiAgXG4gIHN0YXRpYyB6b29tSW4obm9kZVRvWm9vbTogTm9kZSwgbm9kZXM6IE5vZGVbXSwgem9vbUxldmVsOiBudW1iZXIpIHtcblxuICAgIGpzUGx1bWIuc2V0RHJhZ2dhYmxlKG5vZGVUb1pvb20uaWQsIGZhbHNlKTtcbiAgICB2YXIgbm9kZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChub2RlVG9ab29tLmlkKTtcbiAgICBub2RlRWxlbWVudC5zdHlsZS53aWR0aCA9IChwYXJzZUludChub2RlRWxlbWVudC5zdHlsZS53aWR0aCkgKiB6b29tTGV2ZWwpICsgXCJweFwiO1xuICAgIG5vZGVFbGVtZW50LnN0eWxlLmhlaWdodCA9IChwYXJzZUludChub2RlRWxlbWVudC5zdHlsZS5oZWlnaHQpICogem9vbUxldmVsKSArIFwicHhcIjtcbiAgICAvLyBib3JkZXIgcmFkaXVzIGlzIGhhcmRjb2RlZCBiZWN1YXNlIG9mIHN0cmFuZ2UgaXNzdWUgd2hlcmUgaXQgaXMgYmxhbmsgdGhlIGZpcnN0IHRpbWVcbiAgICBub2RlRWxlbWVudC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAoMjAgKiB6b29tTGV2ZWwpICsgXCJweFwiO1xuICAgIHRoaXMuc2V0Rm9udHMoXCJjb21wb25lbnQtbmFtZVwiLCB6b29tTGV2ZWwpOyAgICBcblxuICAgIC8vIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBvZiB0aGUgem9vbWVkIG5vZGUgaXMgc2F2ZWQgdG8gY2FsY3VsYXRlIHRoZSBuZXcgcG9zaXRpb24gZm9yIHRoZSBvdGhlciBub2Rlc1xuICAgIHZhciB6b29tZWRPbGRYID0gcGFyc2VJbnQobm9kZUVsZW1lbnQuc3R5bGUubGVmdCk7XG4gICAgdmFyIHpvb21lZE9sZFkgPSBwYXJzZUludChub2RlRWxlbWVudC5zdHlsZS50b3ApO1xuICAgIC8vIHpvb21lZCBub2RlIG1vdmVzIGludG8gdGhlIG1pZGRsZSBvZiB0aGUgc2NyZWVuXG4gICAgdmFyIHpvb21lZE5ld1ggPSAoc2NyZWVuLndpZHRoIC8gMikgLSAoKHpvb21MZXZlbCAqIDEwMCkgLyAyKTtcbiAgICB2YXIgem9vbWVkTmV3WSA9IChzY3JlZW4uaGVpZ2h0IC8gMikgLSAoKHpvb21MZXZlbCAqIDEwMCkgLyAxLjUpO1xuICAgIHZhciBkZWx0YVggPSB6b29tZWROZXdYIC0gem9vbWVkT2xkWDtcbiAgICB2YXIgZGVsdGFZID0gem9vbWVkTmV3WSAtIHpvb21lZE9sZFk7XG5cbiAgICAvLyBqc1BsdW1iIGFuaW1hdGUgbWV0aG9kIGlzIHVzZWQgdG8gcmVwYWludCB0aGUgZW5kcG9pbnRzIGFuZCBjb25uZWN0aW9ucyB3aXRoIHRoZSB6b29taW5nXG4gICAganNQbHVtYi5hbmltYXRlKG5vZGVUb1pvb20uaWQsIHsgXG4gICAgICAgIFwibGVmdFwiOiB6b29tZWROZXdYLCBcbiAgICAgICAgXCJ0b3BcIjogem9vbWVkTmV3WSwgXG4gICAgICAgIFwiaGVpZ2h0XCI6IG5vZGVFbGVtZW50LnN0eWxlLmhlaWdodCwgXG4gICAgICAgIFwid2lkdGhcIjogbm9kZUVsZW1lbnQuc3R5bGUud2lkdGggXG4gICAgICB9LHsgXG4gICAgICAgIGR1cmF0aW9uOiBcIjQwMFwiIFxuICAgICAgfSx7IFxuICAgICAgICBzdGVwOiBmdW5jdGlvbigpIHsgICAgICAgICBcbiAgICAgICAgICBqc1BsdW1iLnJlcGFpbnRFdmVyeXRoaW5nKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBvdGhlck5vZGVzID0gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuaWQgIT09IG5vZGVUb1pvb20uaWQ7XG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBub2RlIG9mIG90aGVyTm9kZXMpIHtcbiAgICAgIC8vIG5vZGVzIGNhbm5vdCBiZSBkcmFnZ2VkIHdoZW4gem9vbWVkIGluXG4gICAgICBqc1BsdW1iLnNldERyYWdnYWJsZShub2RlLmlkLCBmYWxzZSk7XG4gICAgICBub2RlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5vZGUuaWQpO1xuICAgICAgbm9kZUVsZW1lbnQuc3R5bGUud2lkdGggPSAocGFyc2VJbnQobm9kZUVsZW1lbnQuc3R5bGUud2lkdGgpICogem9vbUxldmVsKSArIFwicHhcIjtcbiAgICAgIG5vZGVFbGVtZW50LnN0eWxlLmhlaWdodCA9IChwYXJzZUludChub2RlRWxlbWVudC5zdHlsZS5oZWlnaHQpICogem9vbUxldmVsKSArIFwicHhcIjtcbiAgICAgIG5vZGVFbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IChwYXJzZUludChub2RlRWxlbWVudC5zdHlsZS5ib3JkZXJSYWRpdXMpICogem9vbUxldmVsKSArIFwicHhcIjtcblxuICAgICAgdmFyIG9sZFggPSBwYXJzZUludChub2RlRWxlbWVudC5zdHlsZS5sZWZ0KTtcbiAgICAgIHZhciBvbGRZID0gcGFyc2VJbnQobm9kZUVsZW1lbnQuc3R5bGUudG9wKTtcbiAgICAgIC8vIG5ldyBjb29yZGluYXRlcyBhcmUgY2FsY3VsYXRlZCBiYXNlZCBvbiB0aGUgbW92ZW1lbnQgb2YgdGhlIHpvb21lZCBub2RlXG4gICAgICB2YXIgbmV3WCA9IG9sZFggKyBkZWx0YVggKyAoKHpvb21MZXZlbCAtIDEpICogKG9sZFggLSB6b29tZWRPbGRYKSk7XG4gICAgICB2YXIgbmV3WSA9IG9sZFkgKyBkZWx0YVkgKyAoKHpvb21MZXZlbCAtIDEpICogKG9sZFkgLSB6b29tZWRPbGRZKSk7XG5cbiAgICAgIGpzUGx1bWIuYW5pbWF0ZShub2RlLmlkLCB7IFxuICAgICAgICAgIFwibGVmdFwiOiBuZXdYLCBcbiAgICAgICAgICBcInRvcFwiOiBuZXdZLCBcbiAgICAgICAgICBcImhlaWdodFwiOiBub2RlRWxlbWVudC5zdHlsZS5oZWlnaHQsIFxuICAgICAgICAgIFwid2lkdGhcIjogbm9kZUVsZW1lbnQuc3R5bGUud2lkdGggXG4gICAgICAgIH0seyBkdXJhdGlvbjogXCI0MDBcIiB9LHsgXG4gICAgICAgICAgc3RlcDogZnVuY3Rpb24oKSB7ICAgICAgICAgXG4gICAgICAgICAgICBqc1BsdW1iLnJlcGFpbnRFdmVyeXRoaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHpvb21PdXQobm9kZXM6IE5vZGVbXSkge1xuXG4gICAgLy8gYWxsIG5vZGVzIGFyZSByZXR1cm5lZCB0byB0aGVpciBzaXplIGFuZCBwb3NpdGlvbiBhY2NvcmRpbmcgdG8gdGhlIHNpbS1jb3JlIG9iamVjdHNcbiAgICBmb3IgKHZhciBub2RlIG9mIG5vZGVzKSB7XG4gICAgICBqc1BsdW1iLnNldERyYWdnYWJsZShub2RlLmlkLCB0cnVlKTtcbiAgICAgIHZhciBub2RlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5vZGUuaWQpO1xuICAgICAgbm9kZUVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMHB4XCI7XG4gICAgICBub2RlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMHB4XCI7XG4gICAgICBub2RlRWxlbWVudC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjIwcHhcIjtcbiAgICAgIHRoaXMuc2V0Rm9udHMoXCJjb21wb25lbnQtbmFtZVwiLCAxKTsgICAgXG5cbiAgICAgIGpzUGx1bWIuYW5pbWF0ZShub2RlLmlkLCB7IFxuICAgICAgICBcImxlZnRcIjogcGFyc2VJbnQobm9kZS5tZXRhZGF0YS52aWV3LngpLCBcbiAgICAgICAgXCJ0b3BcIjogcGFyc2VJbnQobm9kZS5tZXRhZGF0YS52aWV3LnkpLCBcbiAgICAgICAgXCJoZWlnaHRcIjogXCIxMDBweFwiLCBcbiAgICAgICAgXCJ3aWR0aFwiOiBcIjQwMHB4XCJcbiAgICAgICB9LCB7IGR1cmF0aW9uOiBcIjQwMFwiIH0sIHsgXG4gICAgICAgIHN0ZXA6ZnVuY3Rpb24oKSB7ICAgICAgICAgXG4gICAgICAgICAganNQbHVtYi5yZXBhaW50RXZlcnl0aGluZygpO1xuICAgICAgICB9XG4gICAgIH0pO1xuICAgIH1cblxuICB9XG5cbiAgc3RhdGljIHNldEZvbnRzKGNsYXNzTmFtZTogc3RyaW5nLCB6b29tRmFjdG9yOiBudW1iZXIpIHtcbiAgICB2YXIgY29tcG9uZW50TGFiZWxzOiBhbnkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG4gICAgZm9yICh2YXIgbGFiZWwgb2YgY29tcG9uZW50TGFiZWxzKSB7XG4gICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9ICg0MCAqIHpvb21GYWN0b3IpICsgXCJweFwiO1xuICAgICAgbGFiZWwuc3R5bGUubWFyZ2luVG9wID0gKDE3ICogem9vbUZhY3RvcikgKyBcInB4XCI7XG4gICAgfVxuICB9XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
